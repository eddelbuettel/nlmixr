<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • nlmixr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nlmixr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/running_nlmixr.html">Introduction to Running Nlmixr</a>
    </li>
    <li>
      <a href="../articles/multiple-endpoints.html">Using Multiple Endpoints in Nlmixr</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Going further</li>
    <li>
      <a href="../articles/modelPiping.html">Model Piping</a>
    </li>
    <li>
      <a href="../articles/broom.html">Sweeping models to tidy datasets (broom)</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/xgxr-nlmixr-ggpmx.html">Integrated development with xgxr/nlmixr/ggPMX</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-chalkboard-teacher"></span>
     
    Example models
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/addingCovariances.html">Phenobarbatol with correlations</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/nimo.html">Nonlinear PK/PD -- Nimotuzumab</a>
    </li>
    <li>
      <a href="../articles/mavoglurant.html">PBPK -- Mavoglurant</a>
    </li>
    <li>
      <a href="../articles/wbc.html">PKPD -- Myelosuppression model</a>
    </li>
  </ul></li>
<li>
  <a href="https://github.com/nlmixrdevelopment/nlmixr/raw/master/CheatSheet_nlmixr.pdf" class="external-link">
    <span class="fa fa-scroll fa-lg"></span>
     
    Cheat Sheet
  </a>
</li>
<li>
  <a href="https://doi.org/10.1002/psp4.12445" class="external-link">
    <span class="fas fa-life-ring"></span>
     
    Tutorial
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o fa-lg"></span>
     
    Functions
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nlmixrdevelopment/nlmixr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/nlmixrdevelopment/nlmixr/releases" class="external-link">
    <span class="fa fa-download"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/nlmixrdevelopment/nlmixr/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="2.0.6" id="nlmixr-206">nlmixr 2.0.6<small>2021-11-02</small><a class="anchor" aria-label="anchor" href="#nlmixr-206"></a></h2>
<ul><li>Fix <code>focei</code> subject initialization, see <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/566" class="external-link">#566</a></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="2.0.5" id="nlmixr-205">nlmixr 2.0.5<small>2021-09-04</small><a class="anchor" aria-label="anchor" href="#nlmixr-205"></a></h2>
<ul><li><p>Fix for <code>nlmixrSim</code> CMT to have a factor that matches the <code>RxODE</code> definition (issue <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/501" class="external-link">#501</a>)</p></li>
<li><p>Give instructions on how to reinstall nlmixr if it is linked to a different version of <code>RxODE</code>. (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/555" class="external-link">#555</a>)</p></li>
<li><p>Now inform which parameters are near the boundary (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/544" class="external-link">#544</a>)</p></li>
<li><p>The <code>saem</code> estimation routine will now increase the tolerance when ODE solving is difficult; This can be controlled with <code>odeRecalcFactors</code> and <code>maxOdeRecalc</code>. This is similar to the handling that <code>focei</code> already uses.</p></li>
<li>
<p>For <code>focei</code> family estimation methods:</p>
<ul><li><p>If the inner problem couldn’t solve the ODE using the forward sensitivities, try using numerical differences to approximate the derivatives needed for the focei problem. A warning will be issued when this occurs. This requires RxODE 1.1.0 that always generates the finite difference prediction model. If RxODE is an earlier version, only apply this when the finite differences are supplied to nlmixr. This occurs when there are ETAs on the dose based events like duration, lag time, bioavaibility etc.</p></li>
<li><p>If eta nudge is non-zero, when resetting an ETA estimate, try the zero estimate first, and then the nudged locations.</p></li>
<li><p>When there is an ODE system for an individual that cannot be optimized in the inner problem, adjust that individual’s objective function by 100 points. This can be controlled by <code>foceiControl(badSolveObjfAdj=100)</code></p></li>
<li><p>Theta reset now will now make sure the parameter is estimated and between the proper bounds before resetting.</p></li>
</ul></li>
<li><p><code>$simInfo</code> non longer tries to generate the covariance step, and will simply have a <code>$simInfo$thetaMat</code> entry of <code>NULL</code> if the covariance step was unsuccessful.</p></li>
<li><p>With <code><a href="../reference/vpc.html">vpc()</a></code> if the cmt conversion isn’t working correctly, fall back to compartment numbers.</p></li>
<li><p>Take out symbol stripping based on CRAN policies</p></li>
<li><p>Fall back gracefully when <code>rbind</code> doesn’t work in parameter histories.</p></li>
<li><p>Correctly print out the number of compartments based on the new <code>RxODE</code> <code>linCmt()</code> that was updated to support solved systems in focei. (Reported by Bill Denney <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/537" class="external-link">#537</a>).</p></li>
<li><p>Use strict headers since Rcpp now is moving toward strict headers. Also changed all the <code>Calloc</code> to <code>R_Calloc</code>, <code>Free</code> to <code>R_Free</code>, and <code>DOUBLE_EPS</code> to <code>DBL_EPSILON</code>.</p></li>
<li><p><code>gnlmm</code> no longer imports the data.frame to an RxODE event table. This should speed up the routine slightly and (more importantly) make it easier to specify time varying covariates.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="2.0.4" id="nlmixr-204">nlmixr 2.0.4<small>2021-04-17</small><a class="anchor" aria-label="anchor" href="#nlmixr-204"></a></h2>
<ul><li><p>Now can use the following for combinde error models: <code>foceiControl(addProp=1)</code> <code>foceiControl(addProp=2)</code> <code>saemControl(addProp=1)</code> <code>saemControl(addProp=2)</code></p></li>
<li><p>Bug-fix for SAEM add+prop and other error models that are optimized with nelder mead simplex (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/503" class="external-link">#503</a>)</p></li>
<li><p>Bug-fix for more complex SAEM models that were not parsing and running. (Issue <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/502" class="external-link">#502</a>, <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/501" class="external-link">#501</a>)</p></li>
<li><p>Issue the “NaN in prediction” once per SAEM problem (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/500" class="external-link">#500</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="2.0.3" id="nlmixr-203">nlmixr 2.0.3<small>2021-04-09</small><a class="anchor" aria-label="anchor" href="#nlmixr-203"></a></h2>
<div class="section level3">
<h3 id="user-interface-changes-2-0-3">User interface changes<a class="anchor" aria-label="anchor" href="#user-interface-changes-2-0-3"></a></h3>
<ul><li><p>Detection of initial conditions was rewritten to enable additional features in the initial conditions (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/322" class="external-link">#322</a>). The most important user-facing change is that now arbitrary R expressions can be used when setting initial conditions such as <code>tvCL &lt;- log(c(2,3,4))</code> (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/253" class="external-link">#253</a>) instead of simply <code>tvCL &lt;- log(3)</code></p></li>
<li><p>The function as.nlmixrBounds() now supports adding the columns that are missing into the input data.frame.</p></li>
<li><p>omega definitions can be correlation matrices (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/338" class="external-link">#338</a>)</p></li>
<li><p>Can specify <code>keep=</code> and <code>drop=</code> in the nlmixr function to keep and drop columns in nlmixr output. Can also specify <code>control=list(keep=,drop=)</code> or <code>nlmixr(...,keep=,drop=)</code> to keep/drop columns (<a href="https://github.com/nlmixrdevelopment/nlmixr/issues/260" class="external-link">#260</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="focei-changes-2-0-3">
<code>focei</code> changes:<a class="anchor" aria-label="anchor" href="#focei-changes-2-0-3"></a></h3>
<ul><li><p>Uses RxODE to re-arrange the problem so it does not include <code>if/else</code> in the model (ie. un-branched code). This allows sensitivities to be calculated in one pass saving time for multiple endpoint models and models with <code>if/else</code> in them.</p></li>
<li>
<p><code>linCmt()</code> now uses solved systems instead of translating to ODEs.</p>
<ul><li>Uses <code>RxODE</code>/<code>stan</code>’s math headers to calculate the sensitivities of the super-positioned <code>linCmt()</code> solutions.</li>
<li>This uses the <code>advan</code> solutions and hence supports support time-varying covariates.</li>
</ul></li>
<li><p><code>focei</code> now supports censoring in the same way <code>monolix</code> does, with <code>cens</code> and <code>limit</code> columns</p></li>
<li><p><code>focei</code> now allows <code>eta</code>s on dose-related modeled events like <code>alag</code>, <code>f</code>, etc by finite difference sensitivities.</p></li>
<li>
<p><code>focei</code> now supports 2 combined additive + proportional error models;</p>
<ul><li>
<code>combined1</code>: <code>trans(y) = trans(f) + (a+b*f^c)*err</code>
</li>
<li>
<code>combined2</code>: <code>trans(y) = trans(f) + sqrt(a^2+b^2*f^(2c))*err</code>
</li>
</ul></li>
<li><p><code>focei</code> <code>etaNudge</code> parameters were changed to use quadrature points covering 95% percent of a standard normal.</p></li>
<li><p>With zero gradients, Gill differences are recomputed to try to find a non-zero gradient.</p></li>
<li><p>Now when running if a zero gradient is detected, reset the problem (theta reset) and re-estimated with <code>outerOpt="bobyqa"</code></p></li>
<li><p>Now when running a model where the last objective function is not the minimum objective function, issue a warning and skip the covariance step. (See Issue <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/403" class="external-link">#403</a>)</p></li>
<li><p><code>focei</code> proportional and power models are more tolerant of 0 predictions in your data</p></li>
</ul></div>
<div class="section level3">
<h3 id="saem-changes-2-0-3">SAEM changes<a class="anchor" aria-label="anchor" href="#saem-changes-2-0-3"></a></h3>
<ul><li><p><code>saem</code> fits now gracefully fall back to the <code>focei</code> likelihood when they support files are no longer on the loaded disk</p></li>
<li><p><code>saem</code> phi pile is now saved in the <code><a href="https://nlmixrdevelopment.github.io/RxODE/reference/rxTempDir.html" class="external-link">RxODE::rxTempDir()</a></code> which can be customized to allow the <code>phi</code> file to remain after R has exited</p></li>
<li><p><code>saem</code> fits now can add in <code>fo</code>, <code>foce</code> and <code>focei</code> likelihood</p></li>
<li><p><code>saem</code> fits now use <code>liblsoda</code> by default and are multi-threaded when running (controlled by <code>RxODE</code>)</p></li>
<li><p><code>saem</code> now supports time-varying covariates (like clock-time)</p></li>
<li>
<p><code>saem</code> now supports 2 combined additive + proportional error models:</p>
<ul><li>
<code>combined1</code>: <code>trans(y) = trans(f) + (a+b*f^c)*err</code>
</li>
<li>
<code>combined2</code>: <code>trans(y) = trans(f) + sqrt(a^2+b^2*f^(2c))*err</code>
</li>
</ul></li>
<li><p><code>saem</code> proportional and power models are more tolerant of 0 predictions in your data</p></li>
<li><p><code>saem</code> now supports censoring a similar way as <code>monolix</code> does, with <code>cens</code> and <code>limit</code> columns</p></li>
<li><p>The default of <code>saem</code> additive + proportional error has been switched to <code>combined2</code>, which was the <code>focei</code> default, but you can change this back with <code>saemControl(addProp="combined2")</code>. The table results will likely be different because in the last release the <code>saem</code> calculated <code>combined1</code> and then used these coefficients in the <code>combined2</code> focei problem.</p></li>
</ul></div>
<div class="section level3">
<h3 id="nlme-changes-2-0-3">nlme changes<a class="anchor" aria-label="anchor" href="#nlme-changes-2-0-3"></a></h3>
<ul><li>
<code>nlme</code> will now support 2 combined additive + proportional error models (if the patched version of nlme is used)
<ul><li>
<code>combined1</code>: <code>y = f + (a+b*f)*err</code>
</li>
<li>
<code>combined2</code>: <code>y = f + sqrt(a^2+b^2*f^2)*err</code>
</li>
<li>See <a href="https://github.com/nlmixrdevelopment/nlmixr/issues/428" class="external-link uri">https://github.com/nlmixrdevelopment/nlmixr/issues/428</a>
</li>
<li>Thanks to Johannes Ranke (<a href="https://github.com/jranke" class="external-link">@jranke</a>) for the nlme patch and the catch</li>
</ul></li>
<li>Can switch with <code>nlmeControl(addProp="combined1")</code> to use the combined1 type of error model</li>
</ul></div>
<div class="section level3">
<h3 id="new-utilities-2-0-3">New Utilities<a class="anchor" aria-label="anchor" href="#new-utilities-2-0-3"></a></h3>
<ul><li><p><code>bootstrapFit</code> now calculates the bootstrap confidence bands and (optionally) will compare with the theoretical chi-squared distribution to help assess their adequacy.</p></li>
<li><p><code>covarSearchAuto</code> now allows automatic forward/backward covariate selection</p></li>
</ul></div>
<div class="section level3">
<h3 id="general-changes-2-0-3">General Changes<a class="anchor" aria-label="anchor" href="#general-changes-2-0-3"></a></h3>
<ul><li><p>Added auto-completion of <code>nlmixr</code> object properties accessed by <code>$</code>. This works for major editors including <code>Rstudio</code>, <code>ESS</code>, and Base R itself.</p></li>
<li><p>Changed the way that Rstudio notebooks display <code>nlmixr</code> objects; It should be more legible in Rstudio.</p></li>
<li><p>Graphics have been revamped to show censoring (including adding ggplot stat/geom <code>geom_cens</code>) as well as use <code>RxODE</code>’s ggplot theme (<code>rxTheme()</code>). Additionally time after dose is calculated as <code>tad</code> for all <code>nlmixr</code> models</p></li>
<li><p>Tables generation has been refactored; <code>npde</code> uses the <code>arma</code> and <code>RxODE</code> random number generators which may change results. Also the default of <code>ties=TRUE</code> has been changed to <code>ties=FALSE</code>. <code>npde</code> calculations have been threaded with <code>OpenMP</code> to speed up the calculation as well. This refactoring was required to have the <code>dv</code> imputation between <code>cwres</code> and <code>npde</code> use the same method. The <code>npde</code> option now calculates the decorrelated <code>npd</code> as well, (which is the recommended weighted residual; see Nguyen 2017)</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-0-3">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-0-3"></a></h3>
<ul><li>Aligned <code>saem</code> and <code>focei</code> additive + proportional error models, so <code>saem</code> <code>additive+proportional</code> outputs will be different using the correct <code>focei</code> method</li>
</ul><p>Note this includes all the RxODE changes <em>including</em> dropping python.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Matthew Fidler, Yuan Xiong, Rik Schoemaker, Justin Wilkins, Wenping Wang, Mason McComb, Vipul Mann, Richard Hooijmaijers.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

